# Biblioteca API

## Visão geral

O projeto é uma aplicação back-end com o objetivo gerenciar objetos relacionados a Biblioteca , incluindo empréstimos, livros e usuários. 

## Tecnologias Utilizadas

- **Spring Boot**: Framework para construção de aplicações em Java.
- **Spring Data JPA**: Integração de acesso a dados usando JPA.
- **Swagger/OpenAPI**: Documentação interativa da API.
- **JUnit**: Framework para testes automatizados.


## Arquitetura

O projeto segue o Padrão de Projeto MVC, separando as camadas de visualização, serviço e persistência:

- **Model**: Representa as entidades e seus mapeamentos para o banco de dados.
- **View**: Exposta como uma API REST com endpoints documentados via Swagger.
- **Controller**: Controla as requisições, direcionando para o serviço apropriado.
- **Service**: Contém a lógica de negócios, realizando operações necessárias nos dados.
- **Repository**: Interage diretamente com o banco de dados usando Spring Data.


# Rodar a aplicação (local)

## Pré-requisito
Antes da execução, é necessario garantir que todas as aplicações abaixo estejam instaladas: 

```
Java - Versão recomendada: 17 +
PostgresSQL - Versão recomendada 16+
Maven - Versão recomendada 3.9.9

```

## Preparando o ambiente 

Será necessário a criação da base de dados relacional no Postgres ou em qualquer outro banco de dados relacional. 

Obs: Caso opte por outra banco de dados à não ser Postgres, então será necessário ajustar o script fornecido abaixo

```
CREATE DATABASE "biblioteca-api";
```

Criação das tabelas:

```
CREATE TABLE "usuarios" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nome" VARCHAR(255) NOT NULL,
	"email" VARCHAR(255) NOT NULL,
	"data_cadastro" TIMESTAMP NOT NULL,
	"telefone" VARCHAR(11) NOT NULL,
	PRIMARY KEY("id")
);


CREATE TABLE "livros" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"titulo" VARCHAR(1000) NOT NULL,
	"autor" VARCHAR(255) NOT NULL,
	"isbn" VARCHAR(50) NOT NULL,
	"data_publicacao" DATE NOT NULL,
	"categoria" VARCHAR(100) NOT NULL,
	PRIMARY KEY("id")
);


CREATE TABLE "emprestimos" (
    "id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
    "usuario_id" INTEGER NOT NULL,
    "livro_id" INTEGER NOT NULL,
    "data_emprestimo" TIMESTAMP NOT NULL,
    "data_devolucao" TIMESTAMP NOT NULL,
    "status" VARCHAR(50) NOT NULL,
    PRIMARY KEY("id"),
    FOREIGN KEY("usuario_id") REFERENCES "usuarios"("id") ON UPDATE NO ACTION ON DELETE NO ACTION,
    FOREIGN KEY("livro_id") REFERENCES "livros"("id") ON UPDATE NO ACTION ON DELETE NO ACTION
);
```


## Instalação da aplicação

Clone o repositório: 
```
git clone https://github.com/CarlosVizu/library-api
```

Em seguida, acesse a pasta do projeto e insira os dados para conexão ao Banco de Dados: 
```
library-api\src\main\resources\application.properties
```

Substitua os seguintes campos pelos dados de conexão ao seu banco de dados Postgres: 
```
spring.datasource.url={JDBC_STRING CONNECTION}
spring.datasource.username={DB_USERNAME}
spring.datasource.password={DB_PASSWORD}
```

Para realização das chamadas aos endpoints que utilizam a API do Google, será necessário a alteração do seguinte arquivo: 
```
library-api\src\main\resources\api.properties
```

O campo abaixo deverá ser substituido com a chave de acesso gerada através do painel do Google Developer pelo usuário: 
```
API_KEY={API_KEY}
```

Acesso ao Command Console e navegue até a pasta do projeto: 
```
cd library-api
```

Compile o código para que o Maven baixe as depêndencias do projeto: 
```
mvn clean package
```

Inicie a aplicação: 
```
mvn spring-boot:run
```

Agora a aplicação está disponível em http://localhost:8080
```
Tomcat started on port 8080 (http) with context path '/'
 Started Startup in ***** seconds (process running for *****)
```

# Acesso aos endpoints
Será disponibilizado as seguintes documentações para visualização e testes dos endpoints: 

## Swagger 
Arquivo .yml com a estrutura e descrição de cada endpoint da aplicação, disponível no caminho:
```
library-api\src\main\resources\doc\biblioteca-api.yml
```

![image](https://github.com/user-attachments/assets/a92e5706-c4fb-4c9b-9275-2c1a76772821)

## Postman
Arquivo .json utilizado para criação de uma nova biblioteca para testes utilizando o Postman, disponível no caminho: 
```
library-api\src\main\resources\doc\biblioteca-api.json
```

![image](https://github.com/user-attachments/assets/ef6acfcf-1613-4d7c-b268-0379e4fc93b4)
